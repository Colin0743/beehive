# "蜂巢" AI视频协作平台 - 前端开发需求规格书 (MVP版本)

## 1. 项目概述

### 1.1 MVP开发理念
本项目旨在快速搭建一个最小可行产品（MVP），验证"蜜蜂AI电影制片厂"平台的核心协作流程。**我们使用现代化的 Web2 技术栈 (Next.js + Supabase) 来替代原有的区块链架构，以实现更高效的开发和更好的用户体验。**

### 1.2 项目背景
平台的核心目标是**"筹集"AI视频的制作时长与创意**。项目发起人（导演）提出创意蓝图，吸引协作者（美术）和工蜂（算力提供者）加入，共同完成AI视频作品。

### 1.3 技术栈
- **前端框架**: Next.js 14 (App Router)
- **开发语言**: TypeScript
- **UI框架**: Tailwind CSS + Semantic UI React (部分复用)
- **后端服务**: Supabase (Backend-as-a-Service)
  - **Auth**: 用户认证 (邮箱/密码)
  - **Database**: PostgreSQL
  - **Storage**: 文件存储 (封面图等)
- **部署平台**: Vercel (推荐)

### 1.4 MVP开发原则
- **快速上线**: 优先实现核心功能，避免过度设计
- **复用优先**: 最大化利用现有代码和组件
- **验证导向**: 专注于验证核心协作流程的可行性

## 2. 核心概念映射

### 2.1 概念转换表

| Kickstarter 概念 | "蜂巢"平台概念 | 说明 |
| :--- | :--- | :--- |
| **资金 (Funding)** | **视频时长 (Video Duration)** | 项目的目标不再是金额，而是最终AI视频的分钟数 |
| **筹款目标 (Funding Goal)** | **时长目标 (Duration Goal)** | 发起人设定希望完成的视频总时长，如"5分钟" |
| **筹款进度条** | **时长进度条** | 实时显示当前已完成的视频时长占总目标的百分比 |
| **支持者 (Backer)** | **关注者 / 协作者 / 工蜂** | 用户可以关注项目，或以更深度的方式参与项目 |
| **回报 (Reward Tiers)** | **参与身份 (Participation Roles)** | 用户选择一个参与项目的角色，而非获得回报 |
| **项目更新 (Updates)** | **项目日志 (Project Log)** | 发起人定期发布项目进展，展示新生成的镜头、美术设定等 |

### 2.2 用户角色定义 (MVP核心)

#### 2.2.1 项目发起人 (Initiator)
- **职责**: 项目的"导演"和"总负责人"
- **权限**: 项目管理仪表盘、进度更新、日志发布

#### 2.2.2 协作者 (Collaborator)
- **职责**: 项目的"核心美术师"
- **标识**: 特殊角色标签

#### 2.2.3 工蜂 (Worker Bee)
- **职责**: 项目的"算力支持者"
- **标识**: 工蜂角色标签，主要在外部群组工作

## 3. MVP核心页面结构与功能需求

### 3.1 首页 (/)
**基于**: `src/app/page.tsx`

#### 3.1.1 功能需求
- 展示平台核心价值主张
- 展示精选/最新项目列表
- "发起项目"引导按钮

#### 3.1.2 项目卡片
- 显示项目封面图
- 显示时长进度条 (当前时长 / 目标时长)
- 显示参与者数量
- 显示发起人信息

### 3.2 项目详情页 (/projects/[id])
**基于**: `src/app/projects/[id]/page.tsx`

#### 3.2.1 信息展示
- **时长进度**: 醒目的进度条展示
- **发起人信息**: 头像、昵称
- **项目统计**: 参与人数、日志数量
- **项目详情**: 支持 Markdown 渲染的详细介绍、剧本、人设等

#### 3.2.2 交互功能 (Supabase Auth)
- **加入项目**:
    - 未登录用户引导登录
    - 已登录用户可点击"加入"，选择角色 (工蜂/协作者)
    - 加入后显示 Telegram 群组链接
- **关注项目**: 收藏项目到个人中心

#### 3.2.3 项目日志
- 时间轴展示发起人发布的更新
- 支持图文混排

### 3.3 创建项目页 (/projects/new)
**基于**: `src/app/projects/new/page.tsx`

#### 3.3.1 表单字段
- 项目标题
- 封面图上传 (Supabase Storage)
- 项目简介 (Markdown编辑器)
- **时长目标** (秒)
- Demo视频链接
- 详细描述 (剧本、人设等)
- **Telegram群组链接**
- 分类选择

### 3.4 项目管理仪表盘 (/projects/[id]/dashboard)
**权限**: 仅项目发起人可见

#### 3.4.1 核心功能
- **更新进度**: 手动输入当前已完成时长，更新进度条
- **发布日志**: 编辑并发布新的项目进展日志
- **成员概览**: 查看加入项目的成员列表

### 3.5 个人中心页 (/profile)
**基于**: `src/app/profile/page.tsx`

#### 3.5.1 功能
- 用户基本信息展示 (从 Supabase Profiles 获取)
- **我发起的项目**: 列表展示
- **我参与的项目**: 列表展示
- **我关注的项目**: 列表展示

## 4. 数据模型 (Supabase Schema 概览)

### 4.1 profiles (用户表)
- `id`: uuid (关联 auth.users)
- `username`: text
- `avatar_url`: text
- `role`: text (admin/user)

### 4.2 projects (项目表)
- `id`: uuid
- `owner_id`: uuid (关联 profiles)
- `title`: text
- `description`: text
- `target_duration`: integer (目标时长，秒)
- `current_duration`: integer (当前时长，秒)
- `cover_image`: text
- `telegram_link`: text
- `status`: text (active/completed)

### 4.3 project_participations (参与记录)
- `id`: uuid
- `project_id`: uuid
- `user_id`: uuid
- `role`: text (collaborator/worker_bee)

### 4.4 project_logs (项目日志)
- `id`: uuid
- `project_id`: uuid
- `content`: text
- `images`: text[]
- `created_at`: timestamp

## 5. 开发路线图

### 第一阶段 (MVP核心) - 已在此阶段
1.  Supabase 环境配置与 Auth 集成 ✅
2.  项目创建、列表、详情页开发 ✅
3.  项目进度更新功能 ✅
4.  个人中心基础版 ✅

### 第二阶段 (体验优化)
1.  图片/文件上传功能 (对接 Supabase Storage)
2.  富文本编辑器优化
3.  加载状态与骨架屏优化

### 第三阶段 (功能扩展)
1.  任务认领系统 (Task Claiming)
2.  站内通知系统
3.  更完善的工蜂贡献记录

## 6. 旧版文档废弃说明
> [!WARNING]
> 本文档取代了旧版基于以太坊区块链的开发规格书。所有的智能合约 (CampaignFactory, Campaign) 交互逻辑已被 Supabase API 调用取代。