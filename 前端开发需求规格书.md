# "蜂巢" AI视频协作平台 - 前端开发需求规格书 (MVP版本)

## 1. 项目概述

### 1.1 MVP开发理念
本项目旨在快速搭建一个最小可行产品（MVP），验证"蜂巢" AI视频协作平台的核心协作流程。**在保证核心需求达成的前提下，我们将尽可能复用或模仿现有Kickstarter架构和页面布局，仅对文字、图标和核心逻辑进行"蜂巢"概念的替换。**

### 1.2 项目背景
基于现有的区块链众筹平台代码架构，将其改造为"蜂巢" AI视频协作平台。平台的核心目标不是筹集资金，而是**"筹集"AI视频的制作时长与创意**。项目发起人（导演）提出创意蓝图，吸引协作者（美术）和工蜂（算力提供者）加入，共同完成AI视频作品。

### 1.3 技术栈保持
- **前端框架**: Next.js 12.2.4 + React 17.0.2
- **UI组件库**: Semantic UI React 2.1.3
- **区块链交互**: Web3.js 1.7.4
- **智能合约**: Solidity ^0.8.9 (以太坊)
- **样式**: Semantic UI CSS + 自定义CSS
- **路由**: Next.js 文件系统路由

### 1.4 MVP开发原则
- **快速上线**: 优先实现核心功能，避免过度设计
- **复用优先**: 最大化利用现有代码和组件
- **概念替换**: 主要进行文案和逻辑的概念转换
- **验证导向**: 专注于验证核心协作流程的可行性

## 2. 核心概念映射与改造需求

### 2.1 概念转换表 (与MVP需求文档完全一致)

| Kickstarter 概念 | "蜂巢"平台概念 | 前端实现说明 |
| :--- | :--- | :--- |
| **资金 (Funding)** | **视频时长 (Video Duration)** | 项目的目标不再是金额，而是最终AI视频的分钟数 |
| **筹款目标 (Funding Goal)** | **时长目标 (Duration Goal)** | 发起人设定希望完成的视频总时长，如"5分钟" |
| **筹款进度条** | **时长进度条** | 实时显示当前已完成的视频时长占总目标的百分比 |
| **支持者 (Backer)** | **关注者 / 协作者 / 工蜂** | 用户可以关注项目，或以更深度的方式参与项目 |
| **回报 (Reward Tiers)** | **参与身份 (Participation Roles)** | 用户选择一个参与项目的角色，而非获得回报 |
| **项目更新 (Updates)** | **项目日志 (Project Log)** | 发起人定期发布项目进展，展示新生成的镜头、美术设定等 |

### 2.2 用户角色定义 (MVP核心)

#### 2.2.1 项目发起人 (Initiator)
- **职责**: 项目的"导演"和"总负责人"
- **前端权限**: 项目管理仪表盘、进度更新、成员管理

#### 2.2.2 协作者 (Collaborator) 
- **职责**: 项目的"核心美术师"
- **前端标识**: 特殊角色标签和权限标识

#### 2.2.3 工蜂 (Worker Bee)
- **职责**: 项目的"算力支持者"
- **前端标识**: 工蜂角色标签，主要在外部群组工作

### 2.3 智能合约映射 (保持现有结构)
- `manager` → `initiator` (项目发起人)
- `minimumContribution` → `minimumParticipation` (最小参与门槛)
- `approvers` → `participants` (项目参与者)
- `approversCount` → `participantsCount` (参与者数量)
- `Request` → `ProgressUpdate` (进度更新请求)

## 3. MVP核心页面结构与功能需求

### 3.1 首页 (/) 
**基于**: `pages/index.jsx` - **保持现有简单结构**

#### 3.1.1 MVP改造需求
```jsx
// 主要文案改造
<Head>
    <title>蜂巢 - AI视频协作平台</title>
    <meta name="description" content="AI视频创作协作平台，汇聚创意与算力" />
</Head>

// 页面标题
<h3>发现精彩视频项目</h3>

// 按钮文案
<Button content="发起项目" icon="video camera" primary />
```

#### 3.1.2 项目卡片增强 (基于现有Card组件)
- 显示项目封面图
- 显示时长进度条
- 显示参与者数量
- 保持现有简单布局

### 3.2 项目详情页 (/projects/[projectAddress])
**基于**: `pages/campaigns/[campaignAddress]/index.jsx` - **重点改造**

#### 3.2.1 信息卡片改造 (基于现有renderCards)
```jsx
const projectInfoCards = [
    {
        header: `${currentDuration}/${targetDuration}分钟`,
        meta: "视频时长进度",
        description: "当前已完成 / 目标总时长",
        color: "blue"
    },
    {
        header: initiatorAddress,
        meta: "项目发起人（导演）",
        description: "项目总负责人",
        color: "purple"
    },
    {
        header: participantsCount,
        meta: "参与者数量",
        description: "协作者 + 工蜂总数",
        color: "green"
    },
    {
        header: progressUpdatesCount,
        meta: "进度更新数",
        description: "项目日志更新次数",
        color: "teal"
    }
];
```

#### 3.2.2 参与表单改造 (替换ContributeForm)
```jsx
// 新的JoinProjectForm组件
<JoinProjectForm projectAddress={projectAddress}>
    <Button content="关注项目" icon="heart" />
    <Button content="加入项目" icon="users" primary />
    // 点击后显示角色选择：协作者 / 工蜂
</JoinProjectForm>
```

#### 3.2.3 项目详细信息区域 (新增)
- 项目简介 (支持Markdown)
- Demo视频链接
- 剧本、人设、场景设定
- **Telegram群组链接** (重要)
- 项目分类

#### 3.2.4 项目日志区域 (新增)
- 发起人发布的更新
- 时间倒序排列
- 支持图文内容

### 3.3 创建项目页 (/projects/new)
**基于**: `pages/campaigns/new.jsx` - **完全重构为MVP表单**

#### 3.3.1 MVP表单字段 (单页面表单，非多步骤)
```jsx
<CreateProjectForm>
    <Input name="title" label="项目标题" required />
    <FileUpload name="coverImage" label="项目封面图/视频" />
    <TextArea name="description" label="项目简介" placeholder="支持Markdown" required />
    <Input name="targetDuration" label="时长目标（秒）" type="number" placeholder="如：300" required />
    <Input name="demoVideoUrl" label="Demo视频链接" />
    <TextArea name="detailedDescription" label="剧本、人设、场景设定等详细描述" />
    <Input name="telegramGroup" label="Telegram群组链接" required />
    <Select name="category" label="所属分类" options={categories} />
    <Button type="submit" content="创建项目" primary />
</CreateProjectForm>
```

### 3.4 项目管理仪表盘 (/projects/[projectAddress]/dashboard)
**基于**: 现有管理功能 - **仅发起人可见**

#### 3.4.1 MVP核心功能
```jsx
<ProjectDashboard>
    {/* 核心功能：更新项目进度 */}
    <ProgressUpdateSection>
        <Input 
            label="更新当前已完成时长（秒）" 
            type="number"
            placeholder="如：从90更新到120"
        />
        <Button content="更新进度" primary />
    </ProgressUpdateSection>

    {/* 发布项目日志 */}
    <ProjectLogSection>
        <TextArea label="发布项目日志" placeholder="分享项目进展..." />
        <FileUpload label="上传图片" multiple />
        <Button content="发布日志" />
    </ProjectLogSection>

    {/* 成员管理 */}
    <MemberManagement>
        <h4>协作者列表</h4>
        <h4>工蜂列表</h4>
        // 简单的成员展示，无复杂管理功能
    </MemberManagement>
</ProjectDashboard>
```

### 3.5 个人中心页 (/profile)
**新增页面** - **保持简单**

#### 3.5.1 MVP功能
```jsx
<ProfilePage>
    <UserInfo>
        <Avatar />
        <UserName />
        <UserRole />
    </UserInfo>

    <ProjectTabs>
        <Tab label="我发起的项目">
            <SimpleProjectList />
        </Tab>
        <Tab label="我参与的项目">
            <SimpleProjectList />
        </Tab>
        <Tab label="我关注的项目">
            <SimpleProjectList />
        </Tab>
    </ProjectTabs>
</ProfilePage>
```

### 3.6 MVP路由结构 (简化版)
```
/                           # 首页 - 项目列表
/projects/new               # 创建项目
/projects/[address]         # 项目详情页
/projects/[address]/dashboard # 项目仪表盘（仅发起人）
/profile                    # 个人中心
```

## 4. MVP组件设计规范

### 4.1 基础组件复用 (保持现有)

#### 4.1.1 现有可复用组件
- `Header` - 导航栏组件 ✅
- `Layout` - 页面布局组件 ✅
- `Card` - 卡片组件 ✅
- `Button` - 按钮组件 ✅
- `Input` - 输入框组件 ✅
- `Form` - 表单组件 ✅

### 4.2 MVP核心新增组件 (最小化)

#### 4.2.1 ProjectCard - 项目卡片组件 (基于现有Card)
```jsx
<ProjectCard
    title={project.title}
    description={project.description}
    coverImage={project.coverImage}
    progress={`${project.currentDuration}/${project.targetDuration}秒`}
    participantsCount={project.participantsCount}
    onClick={() => router.push(`/projects/${project.address}`)}
/>
```

#### 4.2.2 JoinProjectForm - 加入项目表单 (简化版)
```jsx
<JoinProjectForm projectAddress={projectAddress}>
    <Button content="关注项目" icon="heart" />
    <Button content="加入项目" icon="users" primary />
    {/* 点击后弹出简单的角色选择 */}
</JoinProjectForm>
```

#### 4.2.3 CreateProjectForm - 创建项目表单 (单页面)
```jsx
<CreateProjectForm>
    <Input name="title" label="项目标题" required />
    <FileUpload name="coverImage" label="项目封面图/视频" />
    <TextArea name="description" label="项目简介" required />
    <Input name="targetDuration" label="时长目标（秒）" type="number" required />
    <Input name="demoVideoUrl" label="Demo视频链接" />
    <TextArea name="detailedDescription" label="详细描述" />
    <Input name="telegramGroup" label="Telegram群组链接" required />
    <Select name="category" label="所属分类" />
    <Button type="submit" content="创建项目" primary />
</CreateProjectForm>
```

### 4.3 MVP数据展示组件

#### 4.3.1 ProjectInfoCards - 项目信息卡片 (基于现有renderCards)
```jsx
const ProjectInfoCards = ({ project }) => (
    <Card.Group itemsPerRow={4}>
        <Card>
            <Card.Content>
                <Card.Header>{project.currentDuration}/{project.targetDuration}秒</Card.Header>
                <Card.Meta>视频时长进度</Card.Meta>
            </Card.Content>
        </Card>
        <Card>
            <Card.Content>
                <Card.Header>{project.initiatorAddress}</Card.Header>
                <Card.Meta>项目发起人</Card.Meta>
            </Card.Content>
        </Card>
        <Card>
            <Card.Content>
                <Card.Header>{project.participantsCount}</Card.Header>
                <Card.Meta>参与者数量</Card.Meta>
            </Card.Content>
        </Card>
        <Card>
            <Card.Content>
                <Card.Header>{project.progressUpdatesCount}</Card.Header>
                <Card.Meta>进度更新数</Card.Meta>
            </Card.Content>
        </Card>
    </Card.Group>
);
```

#### 4.3.2 SimpleProjectList - 简单项目列表
```jsx
const SimpleProjectList = ({ projects }) => (
    <Card.Group>
        {projects.map(project => (
            <ProjectCard key={project.address} {...project} />
        ))}
    </Card.Group>
);
```

### 4.4 MVP管理组件 (仅发起人)

#### 4.4.1 ProgressUpdateForm - 进度更新表单
```jsx
const ProgressUpdateForm = ({ projectAddress, currentDuration }) => (
    <Form>
        <Input 
            label="更新当前已完成时长（秒）" 
            type="number"
            defaultValue={currentDuration}
            placeholder="如：从90更新到120"
        />
        <Button content="更新进度" primary />
    </Form>
);
```

#### 4.4.2 ProjectLogForm - 项目日志表单
```jsx
const ProjectLogForm = () => (
    <Form>
        <TextArea label="发布项目日志" placeholder="分享项目进展..." />
        <input type="file" multiple accept="image/*" />
        <Button content="发布日志" />
    </Form>
);
```

### 4.5 MVP排除的复杂组件

以下组件**不在MVP范围内**，后期开发：

- ❌ CreateProjectWizard (多步骤向导)
- ❌ TaskCard / TaskStatusUpdater (任务管理)
- ❌ ProjectMediaGallery (复杂媒体展示)
- ❌ TeamMembersList (复杂成员管理)
- ❌ ProjectStatsPanel (复杂统计面板)
- ❌ DashboardLayout (复杂仪表盘布局)

### 4.6 组件开发优先级

**高优先级 (MVP必需)**:
1. ProjectCard (基于现有Card)
2. JoinProjectForm (简单版)
3. CreateProjectForm (单页面)
4. ProjectInfoCards (基于现有)

**中优先级 (MVP可选)**:
1. ProgressUpdateForm
2. ProjectLogForm
3. SimpleProjectList

**低优先级 (后期开发)**:
1. 所有复杂组件
2. 高级交互功能
3. 复杂数据可视化

### 4.2 组件设计原则

#### 4.2.1 复用现有Semantic UI组件
```jsx
// 继续使用现有的UI组件库
import { 
    Button, Card, Form, Input, TextArea, 
    Table, Grid, Container, Menu, Header,
    Progress, Label, Icon, Modal, Dropdown
} from 'semantic-ui-react';
```

#### 4.2.2 自定义主题色彩
```css
/* 蜂巢主题色彩 */
:root {
    --primary-color: #f39c12;      /* 蜂蜜黄 */
    --secondary-color: #e67e22;    /* 橙色 */
    --accent-color: #3498db;       /* 蓝色 */
    --success-color: #27ae60;      /* 绿色 */
    --warning-color: #f1c40f;      /* 警告黄 */
    --danger-color: #e74c3c;       /* 红色 */
    --dark-color: #2c3e50;         /* 深色 */
    --light-color: #ecf0f1;        /* 浅色 */
}
```

#### 4.2.3 响应式设计
```jsx
// 使用Semantic UI的响应式Grid系统
<Grid stackable>
    <Grid.Column width={10} computer={10} tablet={16} mobile={16}>
        {/* 主内容 */}
    </Grid.Column>
    <Grid.Column width={6} computer={6} tablet={16} mobile={16}>
        {/* 侧边内容 */}
    </Grid.Column>
</Grid>
```

## 5. MVP数据流与状态管理

### 5.1 MVP数据流设计 (保持现有架构)

#### 5.1.1 现有数据获取模式 (继续使用)
```javascript
// 保持现有的简单数据获取模式
// 1. 通过getInitialProps在服务端获取数据
// 2. 直接调用智能合约方法
// 3. 使用Web3进行区块链交互

// MVP示例：获取项目列表
Home.getInitialProps = async () => {
    const projects = await factory.methods.getProjects().call();
    return { projects };
};

// MVP示例：获取项目详情
ProjectDetails.getInitialProps = async ({ query }) => {
    const project = projectConstructor(query.projectAddress);
    const summary = await project.methods.getSummary().call();
    return { ...summary };
};
```

### 5.2 MVP核心数据结构

#### 5.2.1 项目数据结构 (简化版)
```javascript
const ProjectData = {
    address: "0x...",
    title: "项目标题",
    description: "项目简介",
    coverImage: "封面图URL",
    targetDuration: 300, // 目标时长（秒）
    currentDuration: 90, // 当前时长（秒）
    initiatorAddress: "0x...", // 发起人地址
    participantsCount: 5, // 参与者数量
    progressUpdatesCount: 3, // 进度更新数
    telegramGroup: "https://t.me/...", // Telegram群组
    category: "动画", // 项目分类
    createdAt: "2024-01-01",
    status: "active" // active, completed, paused
};
```

#### 5.2.2 用户数据结构 (简化版)
```javascript
const UserData = {
    address: "0x...",
    name: "用户名",
    avatar: "头像URL",
    role: "creator", // creator, collaborator, worker_bee
    initiatedProjects: [], // 发起的项目地址数组
    participatedProjects: [], // 参与的项目地址数组
    followedProjects: [] // 关注的项目地址数组
};
```

### 5.3 MVP状态管理 (最小化)

#### 5.3.1 页面级状态管理 (使用React useState)
```javascript
// 首页状态
const HomePage = () => {
    const [projects, setProjects] = useState([]);
    const [loading, setLoading] = useState(true);
    
    useEffect(() => {
        loadProjects();
    }, []);
    
    const loadProjects = async () => {
        try {
            const projectList = await factory.methods.getProjects().call();
            setProjects(projectList);
        } catch (error) {
            console.error('加载项目失败:', error);
        } finally {
            setLoading(false);
        }
    };
    
    return (
        <div>
            {loading ? <Loader /> : <ProjectList projects={projects} />}
        </div>
    );
};
```

#### 5.3.2 项目详情页状态管理
```javascript
const ProjectDetailsPage = ({ projectAddress }) => {
    const [project, setProject] = useState(null);
    const [userRole, setUserRole] = useState(null);
    const [loading, setLoading] = useState(true);
    
    useEffect(() => {
        loadProjectDetails();
        checkUserRole();
    }, [projectAddress]);
    
    const loadProjectDetails = async () => {
        try {
            const projectContract = projectConstructor(projectAddress);
            const summary = await projectContract.methods.getSummary().call();
            setProject(summary);
        } catch (error) {
            console.error('加载项目详情失败:', error);
        } finally {
            setLoading(false);
        }
    };
    
    return (
        <div>
            {loading ? <Loader /> : <ProjectDetails project={project} />}
        </div>
    );
};
```

### 5.4 MVP数据操作 (核心功能)

#### 5.4.1 创建项目
```javascript
const createProject = async (projectData) => {
    try {
        const accounts = await web3.eth.getAccounts();
        await factory.methods.createProject(
            projectData.title,
            projectData.description,
            projectData.targetDuration,
            projectData.telegramGroup
        ).send({
            from: accounts[0]
        });
        
        // 创建成功后跳转
        router.push('/');
    } catch (error) {
        console.error('创建项目失败:', error);
        throw error;
    }
};
```

#### 5.4.2 加入项目
```javascript
const joinProject = async (projectAddress, role) => {
    try {
        const accounts = await web3.eth.getAccounts();
        const project = projectConstructor(projectAddress);
        
        await project.methods.joinProject(role).send({
            from: accounts[0]
        });
        
        // 加入成功后刷新页面
        window.location.reload();
    } catch (error) {
        console.error('加入项目失败:', error);
        throw error;
    }
};
```

#### 5.4.3 更新项目进度
```javascript
const updateProgress = async (projectAddress, newDuration) => {
    try {
        const accounts = await web3.eth.getAccounts();
        const project = projectConstructor(projectAddress);
        
        await project.methods.updateProgress(newDuration).send({
            from: accounts[0]
        });
        
        // 更新成功后刷新页面
        window.location.reload();
    } catch (error) {
        console.error('更新进度失败:', error);
        throw error;
    }
};
```

### 5.5 MVP排除的复杂数据流

以下数据流功能**不在MVP范围内**：

- ❌ 全局状态管理 (Redux/Context)
- ❌ 实时数据同步
- ❌ 复杂缓存策略
- ❌ 数据预加载和懒加载
- ❌ 离线数据支持
- ❌ 数据分页和虚拟滚动
- ❌ 复杂的数据验证和错误处理

### 5.6 MVP数据流优先级

**高优先级 (MVP必需)**:
1. 基本的项目CRUD操作
2. 用户认证和角色管理
3. 简单的错误处理

**中优先级 (MVP可选)**:
1. 数据加载状态显示
2. 基本的表单验证

**低优先级 (后期开发)**:
1. 复杂状态管理
2. 高级数据操作
3. 性能优化
## 6. MVP路由结构设计 (简化版)

### 6.1 MVP路由结构
```
MVP路由结构 (保持简单):
/                           # 首页 - 项目列表
/projects/new               # 创建项目 (单页面表单)
/projects/[address]         # 项目详情页
/profile                    # 个人中心 (基础版)
```

### 6.2 MVP排除的路由

以下路由**不在MVP范围内**：
- ❌ `/projects/[address]/dashboard` - 复杂项目仪表盘
- ❌ `/projects/[address]/tasks` - 任务管理系统
- ❌ `/projects/[address]/gallery` - 项目作品集
- ❌ `/profile/edit` - 编辑个人信息
- ❌ `/search` - 搜索页面
- ❌ `/categories/[category]` - 分类页面

### 6.3 MVP路由实现示例
```javascript
// pages/projects/[address].jsx (简化版)
import { useRouter } from 'next/router';
import { useEffect, useState } from 'react';
import Layout from '../../components/Layout';
import ProjectDetails from '../../components/ProjectDetails';

function ProjectDetailsPage() {
    const router = useRouter();
    const { address } = router.query;
    const [project, setProject] = useState(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        if (address) {
            loadProjectData();
        }
    }, [address]);

    const loadProjectData = async () => {
        try {
            const projectContract = projectConstructor(address);
            const summary = await projectContract.methods.getSummary().call();
            setProject(summary);
        } catch (error) {
            console.error('加载项目失败:', error);
        } finally {
            setLoading(false);
        }
    };

    if (loading) return <div>加载中...</div>;

    return (
        <Layout>
            <ProjectDetails project={project} />
        </Layout>
    );
}

export default ProjectDetailsPage;
```

## 7. MVP开发总结

### 7.1 MVP开发优先级

**第一阶段 (MVP核心功能)**:
1. 更新Header和Layout组件的文案和样式
2. 改造首页项目列表展示
3. 重构项目详情页，添加蜂巢特有的信息展示
4. 改造项目创建表单，支持蜂巢平台的字段
5. 实现基本的角色选择和加入项目功能

**MVP排除功能 (后期开发)**:
- ❌ 复杂的项目仪表盘和进度管理
- ❌ 任务管理系统
- ❌ 高级搜索和筛选功能
- ❌ 实时通知功能
- ❌ 复杂的用户权限管理
- ❌ 项目统计和分析功能
- ❌ 高级性能优化
- ❌ 多步骤项目创建向导
- ❌ 复杂的文件上传和管理
- ❌ 高级筛选和排序功能
- ❌ 项目评论和讨论系统
- ❌ 用户消息和私信功能
- ❌ 项目收藏和标签系统
- ❌ 高级用户认证（OAuth、第三方登录）
- ❌ 项目推荐算法
- ❌ 数据导出和报告功能

### 7.2 MVP技术要求

1. **保持现有架构**: 继续使用Next.js + Semantic UI + Web3
2. **最小化改动**: 复用现有组件和智能合约
3. **快速开发**: 专注核心功能，避免过度设计
4. **快速验证**: 尽快上线验证产品市场契合度

### 7.3 MVP成功指标

1. **功能完整性**: 用户能够创建、浏览、加入项目
2. **基本可用性**: 页面正常加载，基本操作无错误
3. **快速上线**: 在最短时间内完成开发和部署
4. **用户反馈**: 收集早期用户反馈，指导后续开发

### 7.4 后期扩展计划

**第二阶段 (功能增强)**:
1. 实现项目仪表盘和进度管理
2. 添加任务管理系统
3. 完善个人中心页面
4. 添加搜索和筛选功能

**第三阶段 (体验优化)**:
1. 添加实时通知功能
2. 实现高级筛选和排序
3. 添加项目统计和分析
4. 优化性能和加载速度

这份MVP版本的前端开发需求规格书专注于核心功能的快速实现，确保"蜂巢" AI视频协作平台能够尽快上线验证产品概念，同时为后续功能扩展预留了清晰的发展路径。