# 需求文档

## 简介

"蜂巢"是一个AI视频线上协作平台，参考Kickstarter模式，但核心目标不是筹集资金，而是"筹集"AI视频的制作时长与创意。项目发起人（导演）提出创意蓝图，吸引工蜂（算力提供者）加入，共同完成AI视频作品。本系统是一个纯粹的协作平台，不涉及钱款往来，使用Next.js + React + Semantic UI构建，MVP阶段使用localStorage存储数据以快速验证产品概念。

**当前项目状态：** 已完成核心功能的基础实现，包括用户认证、项目创建、项目浏览、项目详情展示和项目日志功能。本需求文档聚焦于完善现有功能和补充MVP必需的缺失功能，以实现快速上线。

## 术语表

- **系统 (System)**: "蜂巢" AI视频协作平台的整体应用
- **项目发起人 (Initiator)**: 创建AI视频项目的用户，担任项目导演和总负责人，负责项目策划、管理和最终剪辑
- **工蜂 (Worker Bee)**: 加入项目提供算力支持的用户，负责根据发起人的要求生成AI视频片段
- **参与者 (Participant)**: 工蜂的统称
- **时长目标 (Duration Goal)**: 项目希望完成的AI视频总时长（以秒为单位）
- **当前时长 (Current Duration)**: 项目已完成的AI视频时长（以秒为单位）
- **项目日志 (Project Log)**: 项目发起人发布的项目进展更新
- **Telegram群组 (Telegram Group)**: 项目的外部沟通渠道
- **项目ID (Project ID)**: 数据库中项目的唯一标识符
- **用户ID (User ID)**: 数据库中用户的唯一标识符

## 需求

### 需求 1 (待完善)

**用户故事:** 作为项目发起人，我想要创建一个新的AI视频项目并上传视频和封面图片，以便吸引工蜂共同完成视频创作

#### 验收标准

1. WHEN 项目发起人提交项目创建表单 THEN 系统 SHALL 在localStorage中创建新项目记录并保存项目信息
2. WHEN 项目发起人填写项目信息 THEN 系统 SHALL 要求必填字段包括项目标题、项目简介、项目分类、时长目标和封面图片
3. WHEN 项目发起人上传封面图片 THEN 系统 SHALL 验证图片格式为JPG、PNG或GIF且文件大小不超过5MB
4. WHEN 项目发起人上传视频文件 THEN 系统 SHALL 验证视频格式为MP4、MOV或AVI且文件大小不超过100MB
5. WHEN 图片或视频上传成功 THEN 系统 SHALL 将文件转换为Base64格式存储在localStorage中
6. WHEN 项目创建成功 THEN 系统 SHALL 将项目发起人的用户ID设置为项目管理员
7. WHEN 项目创建成功 THEN 系统 SHALL 将新项目添加到项目列表中
8. WHEN 项目创建成功 THEN 系统 SHALL 跳转到新创建的项目详情页

### 需求 2 ✅ (已实现)

**用户故事:** 作为用户，我想要浏览所有AI视频项目，以便找到感兴趣的项目参与

#### 验收标准

1. WHEN 用户访问首页 THEN 系统 SHALL 显示所有已创建的项目列表
2. WHEN 显示项目卡片 THEN 系统 SHALL 展示项目标题、封面图、时长进度和参与者数量
3. WHEN 用户点击项目卡片 THEN 系统 SHALL 跳转到该项目的详情页
4. WHEN 项目列表为空 THEN 系统 SHALL 显示提示信息引导用户创建项目
5. WHEN 用户使用筛选功能 THEN 系统 SHALL 根据分类、状态和排序方式过滤项目列表

### 需求 3 ✅ (已实现)

**用户故事:** 作为用户，我想要查看项目的详细信息，以便了解项目内容和参与方式

#### 验收标准

1. WHEN 用户访问项目详情页 THEN 系统 SHALL 显示项目的完整信息包括标题、简介、时长目标、当前时长、发起人名称、参与者数量和Telegram群组链接
2. WHEN 显示时长进度 THEN 系统 SHALL 以进度条形式展示当前时长占时长目标的百分比
3. WHEN 显示项目日志 THEN 系统 SHALL 按时间倒序展示所有项目日志
4. WHEN 用户是项目发起人 THEN 系统 SHALL 显示编辑项目和添加日志的按钮
5. WHEN 用户点击Telegram群组链接 THEN 系统 SHALL 在新标签页打开Telegram群组

### 需求 4 (待完善)

**用户故事:** 作为用户，我想要关注感兴趣的项目，以便后续跟踪项目进展

#### 验收标准

1. WHEN 用户点击"关注项目"按钮 THEN 系统 SHALL 在localStorage中记录用户对该项目的关注关系
2. WHEN 用户关注项目成功 THEN 系统 SHALL 将按钮状态更新为"已关注"
3. WHEN 用户取消关注 THEN 系统 SHALL 移除关注关系并更新按钮状态
4. WHEN 用户未登录 THEN 系统 SHALL 阻止关注操作并提示登录
5. WHEN 用户已关注项目 THEN 系统 SHALL 在个人中心的关注列表中显示该项目

### 需求 5 (待完善)

**用户故事:** 作为用户，我想要以工蜂身份加入项目，以便参与AI视频创作

#### 验收标准

1. WHEN 用户点击"成为工蜂"或"加入项目"按钮 THEN 系统 SHALL 显示角色确认对话框
2. WHEN 用户确认加入 THEN 系统 SHALL 在localStorage中记录用户的项目参与关系（角色为工蜂）
3. WHEN 用户加入项目成功 THEN 系统 SHALL 增加项目的参与者数量
4. WHEN 用户已加入项目 THEN 系统 SHALL 显示用户的工蜂身份并更新按钮状态为"已加入"
5. WHEN 用户未登录 THEN 系统 SHALL 阻止加入操作并提示登录

### 需求 6 (待实现)

**用户故事:** 作为项目发起人，我想要更新项目的完成时长，以便反映项目的实际进展

#### 验收标准

1. WHEN 项目发起人访问项目编辑页面 THEN 系统 SHALL 显示当前时长和更新时长的输入框
2. WHEN 项目发起人提交新的时长值 THEN 系统 SHALL 验证新时长为有效数字且不超过目标时长
3. WHEN 新时长验证通过 THEN 系统 SHALL 更新localStorage中项目的当前时长
4. WHEN 时长更新成功 THEN 系统 SHALL 刷新项目详情页的进度条显示
5. WHEN 非项目发起人尝试编辑项目 THEN 系统 SHALL 拒绝访问并显示权限错误

### 需求 7 ✅ (已实现)

**用户故事:** 作为项目发起人，我想要发布项目日志，以便向参与者和关注者分享项目进展

#### 验收标准

1. WHEN 项目发起人点击"添加日志"按钮 THEN 系统 SHALL 显示日志发布对话框
2. WHEN 项目发起人提交项目日志 THEN 系统 SHALL 保存日志标题、内容、类型和时间戳到localStorage
3. WHEN 项目日志发布成功 THEN 系统 SHALL 在项目详情页的日志区域显示新日志
4. WHEN 显示项目日志 THEN 系统 SHALL 按时间倒序排列所有日志
5. WHEN 非项目发起人访问项目详情页 THEN 系统 SHALL 隐藏添加日志按钮

### 需求 8 (待实现)

**用户故事:** 作为用户，我想要查看个人中心，以便管理我发起、参与和关注的项目

#### 验收标准

1. WHEN 用户访问个人中心页面 THEN 系统 SHALL 显示用户的头像、用户名和基本信息
2. WHEN 显示项目列表 THEN 系统 SHALL 提供三个标签页分别展示发起的项目、参与的项目和关注的项目
3. WHEN 用户切换标签页 THEN 系统 SHALL 从localStorage加载并显示对应类别的项目列表
4. WHEN 用户点击项目 THEN 系统 SHALL 跳转到该项目的详情页
5. WHEN 用户未登录 THEN 系统 SHALL 重定向到登录页面

### 需求 9 ✅ (已实现)

**用户故事:** 作为用户，我想要注册和登录账户，以便使用平台的各项功能

#### 验收标准

1. WHEN 用户提交注册表单 THEN 系统 SHALL 验证姓名、邮箱和密码的有效性
2. WHEN 注册信息验证通过 THEN 系统 SHALL 在localStorage中创建新用户记录
3. WHEN 用户提交登录表单 THEN 系统 SHALL 验证邮箱和密码的有效性
4. WHEN 登录验证通过 THEN 系统 SHALL 创建用户会话并在页面头部显示用户头像和用户名
5. WHEN 用户点击退出登录 THEN 系统 SHALL 清除localStorage中的用户会话并跳转到首页

### 需求 10 (待实现)

**用户故事:** 作为项目发起人，我想要编辑我创建的项目信息，以便更新项目内容和进度

#### 验收标准

1. WHEN 项目发起人点击"编辑项目"按钮 THEN 系统 SHALL 跳转到项目编辑页面
2. WHEN 项目编辑页面加载 THEN 系统 SHALL 预填充项目的现有信息到表单中
3. WHEN 项目发起人修改项目信息并提交 THEN 系统 SHALL 验证表单数据的有效性
4. WHEN 表单验证通过 THEN 系统 SHALL 更新localStorage中的项目信息
5. WHEN 非项目发起人尝试访问编辑页面 THEN 系统 SHALL 拒绝访问并显示权限错误
